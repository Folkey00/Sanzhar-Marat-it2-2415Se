{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <h2>Чат по проекту: {{ project.title }}</h2>
  <h3>Чат с {{ project.executor.get_role }} {{ project.executor.username }}</h3>

  <div class="messages">
    {% for message in messages %}
      <div>
        <strong>{{ message.sender.username }}</strong>: {{ message.text }}
        <span class="text-muted">[{{ message.timestamp|date:"d M Y H:i" }}]</span>
      </div>
    {% empty %}
      <p>Пока сообщений нет.</p>
    {% endfor %}
  </div>

  <form method="post" class="mt-3">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Отправить</button>
  </form>
</div>
{% endblock %}
